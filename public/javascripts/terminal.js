var terminal=(()=>{var t={};function n(t){for(var n=t+"=",a=decodeURIComponent(document.cookie).split(";"),e=0;e<a.length;e++){for(var o=a[e];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(n))return o.substring(n.length,o.length)}return""}function a(t=0){return new Promise(n=>setTimeout(n,t))}function e(){$(".container").append('<br /><span class="host col-12 m-0 p-0">OS_0000001@earth:~$&nbsp;</span>')}async function o(t){for(let n of t)e(),await i(n),await a(50)}async function i(t){for(var n in $(".container .host").last().append('<span class="console"></span>'),t)$(".container .host span").last().append(t[n]),await a(50)}function r(){window.scrollBy(0,1),scrolldelay=setTimeout(r,10)}async function s(t){let n=0;await fetch("/_api/check/getProgress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teamCode:t})}).then(t=>(n=t.status,t.json())).then(async a=>{200===n&&(a.status?await o(a.story):await d()),403!==n&&404!==n||(!function(t,n,a){let e=new Date;e.setTime(e.getTime()+24*a*60*60*1e3);let o="expires="+e.toUTCString();document.cookie=t+"="+n+";"+o+";path=/"}("teamID",t,0),await d())})}async function c(){e(),$(".container .host").last().append('<input type="text" id="id_and_code" name="id_and_code" class="col-4 col-md-6 col-lg-8 m-0 p-0">'),$("#id_and_code").focus(),$("#id_and_code").keypress(async function(t){13==t.keyCode&&($("#id_and_code").prop("disabled",!0),await async function(t){let n=0;await fetch("/_api/check/setProgress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teamCode:t.split(" ")[0],storyCode:t.split(" ")[1]})}).then(t=>(n=t.status,t.json())).then(async t=>(e(),200===n?(await i(t.message),await o(t.story),!0):403===n?(await i(t.error),!1):404===n?(await i(t.error),!1):500===n?(await i(t.error),!1):void 0)).catch(async t=>(await i("網路錯誤，請重新再試"),console.log("Network Error: ",t),!1))}($("#id_and_code").val()),$("#id_and_code").removeAttr("id"),c())})}async function d(){let t=["你好","歡迎登入世界終端","請輸入你的 ID 辨識碼以及十位訊息代碼","如: 21538 X9GEFX1TLL"];for(let n=0;n<t.length;n++)e(),await i(t[n]),await a(300)}return t.init=(()=>{!async function(){$(".container").append("Welcome to WorldSimulation 2019.05 LTS (GNU/Linux 4.4.0-139-generic x86_64)\n\n        <br/><br/><br/> &nbsp;* Documentation:  https://help.WorldSimulation.com\n        <br/> &nbsp;* Management:     https://landscape.WorldSimulation.com\n        <br/> &nbsp;* Support:        https://WorldSimulation.com/advantage\n        <br/><br/><br/> 20 packages can be updated.\n        <br/> 3 updates are security updates.\n\n\n        <br/><br/><br/> *** System restart required ***\n        <br/> Last login: Sun Apr 21 01:52:42 2019 from 163.22.17.215 <br />"),""!==n("teamID")?(await s(n("teamID")),await c()):(await d(),await c())}(),r()}),t})();