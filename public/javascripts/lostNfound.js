var lnfApp=(()=>{var e={},t=$("tbody>tr:last>th").html(),o=(e=0)=>new Promise(t=>setTimeout(t,e));return e.init=(()=>{"undefined"!=typeof Storage?localStorage.code&&localStorage.place&&localStorage.time&&($("#ad").removeClass("d-none"),$("tbody").append(`\n                    <tr>\n                        <th scope="row">${++t}</th>\n                        <td>${localStorage.code}</td>\n                        <td>${localStorage.place}</td>\n                        <td>${localStorage.time}</td>\n                    </tr>\n                `)):alert("您的瀏覽器不支援本服務，請使用其他瀏覽器或更新版本"),$("#newFound").on("click",()=>{let e=new Date;$("#form32").val(e.getHours()+":"+("0"+e.getMinutes()).slice(-2))}),$("#send").on("click",async()=>{$("#send").prop("disabled",!0);let e={id:$("#form26").val(),code:$("#form34").val(),place:$("#form29").val(),time:$("#form32").val()},o=0;await fetch("/_api/lnf/found",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,code:e.code})}).then(e=>(o=e.status,e.json())).then(a=>{200===o&&(localStorage.setItem("code",e.code),localStorage.setItem("place",e.place),localStorage.setItem("time",e.time),$("tbody").append(`\n                        <tr>\n                            <th scope="row">${++t}</th>\n                            <td>${e.code}</td>\n                            <td>${e.place}</td>\n                            <td>${e.time}</td>\n                        </tr>\n                    `),$("#form26").val(""),$("#form34").val(""),$("#form29").val(""),$("#form8").val(""),alert(a.message+', You got a secret code: "'+a.storyCode+'" Please keep it in you mind.'),$("#modalContactForm").modal("toggle"),$("#send").prop("disabled",!1),$("#ad").removeClass("d-none")),403!=o&&404!==o&&500!==o||(alert(a.error),$("#send").prop("disabled",!1))})}),async function(){let e;for(;;)for(let t=1;t<=3;t++)e="/images/bus0"+t+".png",$("#adImg").attr("src",e),await o(500)}()}),e})();